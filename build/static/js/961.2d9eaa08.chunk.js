"use strict";(self.webpackChunkmypima_front=self.webpackChunkmypima_front||[]).push([[961],{96961:function(e,n,a){a.r(n),a.d(n,{default:function(){return C}});var t,o=a(1413),r=a(93433),s=a(29439),i=a(30168),l=a(72791),c=a(30177),u=a(9383),d=a(32543),m=a(82165),f=a(82839),h=a(90466),p=a(12891),v=a(71827),g=a(27281),x=a(62066),j=a(39126),y=a(57299),A=a(80184),P=(0,u.Ps)(t||(t=(0,i.Z)(["\n  query GetAAs($project_id: String!) {\n    getPerformanceByAA(project_id: $project_id) {\n      message\n      status\n      data {\n        id\n        name\n        monthlyCounts {\n          date\n          trainingCount\n          dpoCount\n        }\n      }\n    }\n  }\n"]))),C=function(e){var n,a=e.selectedProject,t=(0,d.a)(P,{variables:{project_id:a}}),i=t.loading,u=t.error,C=t.data,b=(0,l.useState)(null),_=(0,s.Z)(b,2),N=_[0],k=_[1],B=(0,l.useState)("auto"),Z=(0,s.Z)(B,2),w=Z[0],D=Z[1],E=(0,l.useRef)(null);(0,l.useEffect)((function(){var e;if(E.current&&(null===C||void 0===C||null===(e=C.getPerformanceByAA)||void 0===e?void 0:e.data.length)>0){var n=Math.max.apply(Math,(0,r.Z)((C.getPerformanceByAA.data||[]).map((function(e){return 8*e.name.length}))));D("".concat(n,"px"))}}),[C]);return(0,A.jsxs)("div",{className:"aa-list-container",children:[(0,A.jsx)("h1",{className:"title",children:"Agronomy Advisor Performance"}),(0,A.jsxs)("div",{className:"select-export-container",children:[(0,A.jsx)(c.ZP,{className:"select",options:null===C||void 0===C||null===(n=C.getPerformanceByAA)||void 0===n?void 0:n.data.map((function(e){return{label:e.name,value:e.id}})),onChange:function(e){var n,a=null===C||void 0===C||null===(n=C.getPerformanceByAA)||void 0===n?void 0:n.data.find((function(n){return n.id===e.value}));k(a)},placeholder:"Select an Agronomy Advisor...",value:N?{label:N.name,value:N.id}:null,styles:{menuPortal:function(e){return(0,o.Z)((0,o.Z)({},e),{},{zIndex:9999})}},menuPortalTarget:document.body,menuPlacement:"auto",width:w,ref:E}),(0,A.jsxs)("button",{className:"export-button",onClick:function(){var e,n=[];null===C||void 0===C||null===(e=C.getPerformanceByAA)||void 0===e||e.data.forEach((function(e){e.monthlyCounts.forEach((function(a){n.push({Name:e.name,Date:a.date,"DPO Count":a.dpoCount,"Training Count":a.trainingCount})}))}));var a=y.P6.json_to_sheet(n),t=y.P6.book_new();y.P6.book_append_sheet(t,a,"AA_Performance"),y.NC(t,"AA_Performance_Data.xlsx")},children:[(0,A.jsx)(j.QNI,{})," Export to Excel"]})]}),N&&(0,A.jsx)("div",{className:"graph-container",children:(0,A.jsxs)("div",{className:"graph-aa",children:[(0,A.jsxs)("h4",{className:"graph-title",children:["Performance Chart for ",N.name]}),(0,A.jsxs)(m.w,{width:600,height:300,data:N.monthlyCounts,children:[(0,A.jsx)(f.q,{strokeDasharray:"3 3"}),(0,A.jsx)(h.K,{dataKey:"date",tick:{fontSize:12}}),(0,A.jsx)(p.B,{label:{value:"Count",angle:-90,position:"insideLeft"},ticks:[0,20,40,60]}),(0,A.jsx)(v.u,{}),(0,A.jsx)(g.D,{}),(0,A.jsx)(x.x,{type:"monotone",dataKey:"trainingCount",name:"Training Observations",stroke:"#007bff"}),(0,A.jsx)(x.x,{type:"monotone",dataKey:"dpoCount",name:"Demo Plot Observations",stroke:"#28a745"})]})]})}),i&&(0,A.jsx)("p",{className:"loading-message",children:"Loading..."}),u&&(0,A.jsxs)("p",{className:"error-message",children:["Error: ",u.message]})]})}}}]);
//# sourceMappingURL=961.2d9eaa08.chunk.js.map