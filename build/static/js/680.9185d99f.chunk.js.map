{"version":3,"file":"static/js/680.9185d99f.chunk.js","mappings":"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","sources":["graphql/queries/farmVisitsRequests.js","graphql/queries/participantsRequests.js","features/training-group/tgdetail/Tgdetail.js"],"sourcesContent":["import { gql } from \"@apollo/client\";\n\nconst GET_FARM_VISITS_PER_PROJECT = gql`\n  query GetFarmVisitsByProject($projectId: String!) {\n    getFarmVisitsByProject(project_id: $projectId) {\n      message\n      status\n      farmVisits {\n        fv_id\n        training_group\n        farmer_tns_id\n        household_tns_id\n        farm_visited\n        farmer_trainer\n        date_visited\n        pima_household_id\n        pima_farmer_id\n        gender\n      }\n    }\n  }\n`;\n\nconst GET_FARM_VISITS_PER_TG = gql`\n  query GetFarmVisitsByGroup($tgId: String!) {\n    getFarmVisitsByGroup(tg_id: $tgId) {\n      message\n      status\n      farmVisits {\n        fv_id\n        fv_name\n        training_group\n        training_session\n        tns_id\n        farm_visited\n        household_id\n        farmer_trainer\n        has_training\n        date_visited\n      }\n    }\n  }\n`;\n\nconst GET_FARM_VISITS_PER_TS = gql`\n  query GetFarmVisitsBySession($tsId: String!) {\n    getFarmVisitsBySession(ts_id: $tsId) {\n      message\n      status\n      farmVisits {\n        fv_id\n        fv_name\n        training_group\n        training_session\n        tns_id\n        farm_visited\n        household_id\n        farmer_trainer\n        has_training\n        date_visited\n      }\n    }\n  }\n`;\n\nconst GET_FARM_VISITS_PER_PART = gql`\n  query GetFarmVisitsByParticipant($partId: String!) {\n    getFarmVisitsByParticipant(part_id: $partId) {\n      message\n      status\n      farmVisits {\n        fv_id\n        fv_name\n        training_group\n        training_session\n        farmer_tns_id\n        farm_visited\n        household_id\n        farmer_trainer\n        has_training\n        date_visited\n      }\n    }\n  }\n`;\n\nconst GET_FARM_VISIT_QAs = gql`\n  query GetFVQAsByFarmVisits($fvId: String!) {\n    getFVQAsByFarmVisits(fv_id: $fvId) {\n      message\n      status\n      fvQAs {\n        bp_id\n        fv_id\n        qas {\n          practice_name_id\n          practice_name\n          questions\n          answers\n        }\n      }\n    }\n  }\n`;\n\nconst UPDATE_QA_IMAGE = gql`\n  mutation UpdateFVQAImageStatus(\n    $bpId: String!\n    $fieldName: FieldNames!\n    $imageStatus: Status!\n  ) {\n    updateFVQAImageStatus(\n      bp_id: $bpId\n      field_name: $fieldName\n      image_status: $imageStatus\n    ) {\n      message\n      status\n    }\n  }\n`;\n\nconst GET_FVQAS_BY_PROJECT_FOR_REVIEW = gql`\n  query getFVQAsByProjectForReview(\n    $projectId: String!\n    $limit: Int!\n    $offset: Int!\n  ) {\n    getFVQAsByProjectForReview(\n      project_id: $projectId\n      limit: $limit\n      offset: $offset\n    ) {\n      message\n      status\n      farmVisits {\n        fv_id\n        training_group\n        training_session\n        tns_id\n        farm_visited\n        household_id\n        farmer_trainer\n        has_training\n        date_visited\n        status\n        qas {\n          practice_name_id\n          practice_name\n          questions\n          answers\n        }\n      }\n    }\n  }\n`;\n\nconst GET_FVQAS_BY_PROJECT_IN_EXCEL = gql`\n  query getFVQAsByProjectInExcel($projectId: String!, $practiceName: String!) {\n    getFVQAsByProjectInExcel(\n      project_id: $projectId\n      practice_name: $practiceName\n    ) {\n      message\n      status\n      file\n    }\n  }\n`;\n\nconst GET_OVERALL_REPORT = gql`\n  query getFVQAsByProjectInExcel($projectId: String!, $practiceName: String!) {\n    getFVQAsByProjectInExcel(\n      project_id: $projectId\n      practice_name: $practiceName\n    ) {\n      message\n      status\n      file\n    }\n  }\n`;\n\nconst UPLOAD_APPROVED_FV = gql`\n  mutation UploadParticipants($partsFile: Upload!) {\n    uploadParticipants(parts_file: $partsFile) {\n      message\n      status\n    }\n  }\n`;\n\nconst GET_SAMPLED_VISITS_STATS = gql`\n  query GetSampledVisitsStats($projectId: String!) {\n    getSampledVisitsStats(projectId: $projectId) {\n      totalSampledVisits\n      totalReviewed\n      remainingVisits\n    }\n  }\n`;\n\nconst GET_BEST_PRACTICE_STATS = gql`\n  query GetBestPracticeStats($projectId: String!, $practiceName: String!) {\n    getBestPracticeReviewStats(\n      projectId: $projectId\n      practiceName: $practiceName\n    ) {\n      reviewedVisits\n      remainingVisits\n      totalVisits\n    }\n  }\n`;\n\nconst GET_PAGINATED_REVIEWS = gql`\n  query GetPaginatedReviews(\n    $projectId: String!\n    $practiceName: String!\n    $page: Int!\n    $pageSize: Int!\n  ) {\n    getPaginatedReviews(\n      projectId: $projectId\n      practiceName: $practiceName\n      page: $page\n      pageSize: $pageSize\n    ) {\n      visit_id\n      sf_visit_id\n      farmer_name\n      farmer_pima_id\n      farmer_tns_id\n      date_visited\n      farmer_trainer\n      BestPractices {\n        practice_id\n        practice_name\n        image_url\n        sf_practice_id\n        question\n        answer\n      }\n    }\n  }\n`;\n\nconst GENERATE_FARM_VISIT_REPORT = gql`\n  query GenerateFarmVisitReport($projectId: String!) {\n    generateFarmVisitReport(projectId: $projectId) {\n      message\n      status\n      file\n    }\n  }\n`;\n\nconst SUBMIT_BATCH_APPROVED_VISITS = gql`\n  mutation SubmitBatch($input: [BatchInput!]!) {\n    submitBatch(input: $input) {\n      success\n      message\n    }\n  }\n`;\n\nconst SUBMIT_BATCH = gql`\n  mutation SubmitBatch($input: [BatchInput!]!) {\n    submitBatch(input: $input) {\n      success\n      message\n    }\n  }\n`;\n\nexport {\n  GET_FARM_VISITS_PER_PROJECT,\n  GET_FARM_VISITS_PER_TG,\n  GET_FARM_VISITS_PER_TS,\n  GET_FARM_VISITS_PER_PART,\n  GET_FARM_VISIT_QAs,\n  GET_FVQAS_BY_PROJECT_FOR_REVIEW,\n  GET_FVQAS_BY_PROJECT_IN_EXCEL,\n  GET_OVERALL_REPORT,\n  GET_PAGINATED_REVIEWS,\n  GET_BEST_PRACTICE_STATS,\n  GET_SAMPLED_VISITS_STATS,\n  GENERATE_FARM_VISIT_REPORT,\n  SUBMIT_BATCH_APPROVED_VISITS,\n  SUBMIT_BATCH,\n  UPLOAD_APPROVED_FV,\n  UPDATE_QA_IMAGE,\n};\n","import { gql } from \"@apollo/client\";\n\nconst GET_PARTICIPANTS_ATTENDANCE_PER_PROJECT = gql`\n  query GetParticipantsAttendanceByProject($projectId: String!) {\n    getParticipantsByProject(project_id: $projectId) {\n      message\n      status\n      participants {\n        p_id\n        first_name\n        middle_name\n        last_name\n        gender\n        age\n        coffee_tree_numbers\n        coop_membership_number\n        phone_number\n        hh_number\n        ffg_id\n        location\n        tns_id\n        status\n        farmer_trainer\n        business_advisor\n        project_name\n        training_group\n        household_id\n        primary_household_member\n        create_in_commcare\n      }\n    }\n    getAttendances(project_id: $projectId) {\n      message\n      status\n      attendance {\n        attendance_id\n        participant_id\n        attendance_name\n        attendance_date\n        attendance_status\n        session_id\n        module_name\n        module_number\n        module_id\n      }\n    }\n  }\n`;\n\nconst GET_PARTICIPANTS_PER_PROJECT = gql`\n  query GetParticipantsAttendanceByProject($projectId: String!) {\n    getParticipantsByProject(project_id: $projectId) {\n      message\n      status\n      participants {\n        p_id\n        first_name\n        middle_name\n        last_name\n        gender\n        age\n        coffee_tree_numbers\n        number_of_coffee_plots\n        coop_membership_number\n        phone_number\n        hh_number\n        ffg_id\n        location\n        tns_id\n        status\n        farmer_trainer\n        business_advisor\n        project_name\n        training_group\n        household_id\n        primary_household_member\n        create_in_commcare\n      }\n    }\n  }\n`;\n\nconst GET_PARTICIPANTS_PER_TG = gql`\n  query GetParticipantsByGroup($tgId: String!) {\n    getParticipantsByGroup(tg_id: $tgId) {\n      message\n      status\n      participants {\n        p_id\n        first_name\n        middle_name\n        last_name\n        gender\n        location\n        tns_id\n        status\n        farmer_trainer\n        business_advisor\n        project_name\n        training_group\n        household_id\n        primary_household_member\n      }\n    }\n  }\n`;\n\nconst GET_PARTICIPANT_BY_ID = gql`\n  query GetParticipantsById($id: String!) {\n    getParticipantsById(p_id: $id) {\n      message\n      status\n      participant {\n        p_id\n        first_name\n        middle_name\n        last_name\n        gender\n        location\n        tns_id\n        status\n        farmer_trainer\n        business_advisor\n        project_name\n        training_group\n        household_id\n        primary_household_member\n      }\n    }\n  }\n`;\n\nconst GET_ATTENDANCE_PER_PARTICIPANT = gql`\n  query GetAttendanceByParticipant($participantId: String!) {\n    getAttendanceByParticipant(participant_id: $participantId) {\n      message\n      status\n      attendance {\n        attendance_id\n        participant_id\n        attendance_name\n        attendance_date\n        attendance_status\n        module_name\n        session_id\n      }\n    }\n  }\n`;\n\nconst UPLOAD_PARTICIPANTS = gql`\n  mutation UploadParticipants($partsFile: Upload!) {\n    uploadParticipants(parts_file: $partsFile) {\n      message\n      status\n      file\n    }\n  }\n`;\n\nconst SYNC_PARTICIPANTS_WITH_COMMCARE = gql`\n  mutation SyncParticipantsWithCOMMCARE($projectId: String!) {\n    syncParticipantsWithCOMMCARE(project_id: $projectId) {\n      message\n      status\n    }\n  }\n`;\n\nexport {\n  GET_PARTICIPANTS_PER_PROJECT,\n  GET_PARTICIPANTS_PER_TG,\n  GET_ATTENDANCE_PER_PARTICIPANT,\n  UPLOAD_PARTICIPANTS,\n  SYNC_PARTICIPANTS_WITH_COMMCARE,\n  GET_PARTICIPANTS_ATTENDANCE_PER_PROJECT,\n  GET_PARTICIPANT_BY_ID\n};\n","import React, { useState, useEffect } from \"react\";\nimport { useOutlet, useOutletContext, useParams } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/client\";\nimport Breadcrumb from \"../../../components/Breadcrumbs\";\nimport Tgtabs from \"./Tgtabs\";\nimport { GET_FARM_VISITS_PER_TG } from \"../../../graphql/queries/farmVisitsRequests\";\nimport { GET_PARTICIPANTS_PER_TG } from \"../../../graphql/queries/participantsRequests\";\nimport LoadingScreen from \"../../../components/LoadingScreen\";\nimport { Typography } from \"@mui/material\";\n\nconst Styles = {\n  marginTop: \"15px\",\n  fontWeight: \"400\",\n  color: \"rgba(125, 127, 136, 1)\",\n  fontSize: \"12px\",\n  maxWidth: \"80%\",\n};\n\nconst Tgdetail = () => {\n  const { trainingGroups, trainingSessions } = useOutletContext();\n  const breadCrumbs = \"Training group\";\n\n  const [farmVisitsPerGroup, setFarmVisitsPerGroup] = useState([]);\n  const [participantsPerGroup, setParticipantsPerGroup] = useState([]);\n\n  // Get params from URL\n  const params = useParams();\n  const { id } = params;\n\n  // Ensure `id` is present before making the query\n  const shouldSkipQuery = !id;\n\n  // Query for farm visits\n  const getAllFarmVisitsByTG = useQuery(GET_FARM_VISITS_PER_TG, {\n    variables: { tgId: id },\n    skip: shouldSkipQuery, // Skip query if id is not present\n  });\n\n  // Query for participants\n  const { loading, error, data } = useQuery(GET_PARTICIPANTS_PER_TG, {\n    variables: { tgId: id },\n    skip: shouldSkipQuery, // Skip query if id is not present\n  });\n\n  const selectedTrainingGroup = trainingGroups.find(\n    (group) => group.tg_id === id\n  );\n\n  const breadCrumbsLinkTo = \"traingroup\";\n\n  // Update farm visits data\n  useEffect(() => {\n    if (getAllFarmVisitsByTG.data) {\n      const farmVisits =\n        getAllFarmVisitsByTG.data.getFarmVisitsByGroup.farmVisits;\n      setFarmVisitsPerGroup(farmVisits);\n    }\n  }, [getAllFarmVisitsByTG.data]);\n\n  // Update participants data\n  useEffect(() => {\n    if (data && data.getParticipantsByGroup.participants) {\n      setParticipantsPerGroup(data.getParticipantsByGroup.participants);\n    }\n  }, [data]);\n\n  if (loading) {\n    return <LoadingScreen />; // Display loading spinner\n  }\n\n  if (error)\n    return (\n      <div className=\"circular_progress\">\n        <Typography color=\"error\">Error loading data</Typography>\n      </div>\n    );\n\n  return (\n    <div>\n      {selectedTrainingGroup && (\n        <>\n          <Breadcrumb\n            name={selectedTrainingGroup.tg_name}\n            firstItem={breadCrumbs}\n            linkTo={breadCrumbsLinkTo}\n          />\n          <div style={{ marginTop: \"10px\" }}>\n            <h1>{selectedTrainingGroup.tg_name}</h1>\n            <p style={Styles}>\n              In the focal farmer group details you can access detailed\n              information for a specific ffg, explore the training sessions list\n              associated with the selected group. Review the Farm Visits List\n              associated with the ffg and export the information displayed on\n              this page to Excel or CSV format.\n            </p>\n          </div>\n          <Tgtabs\n            details={selectedTrainingGroup}\n            trainingSessions={\n              trainingSessions &&\n              trainingSessions.length > 0 &&\n              trainingSessions.filter(\n                (session) => session.ts_group === selectedTrainingGroup.tg_name\n              )\n            }\n            farmVisits={farmVisitsPerGroup}\n            participants={participantsPerGroup}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Tgdetail;\n"],"names":["GET_FARM_VISITS_PER_PROJECT","gql","GET_FARM_VISITS_PER_TG","GET_FARM_VISITS_PER_PART","GET_SAMPLED_VISITS_STATS","GET_BEST_PRACTICE_STATS","GET_PAGINATED_REVIEWS","GENERATE_FARM_VISIT_REPORT","SUBMIT_BATCH","GET_PARTICIPANTS_PER_PROJECT","GET_PARTICIPANTS_PER_TG","GET_PARTICIPANT_BY_ID","GET_ATTENDANCE_PER_PARTICIPANT","UPLOAD_PARTICIPANTS","SYNC_PARTICIPANTS_WITH_COMMCARE","Styles","marginTop","fontWeight","color","fontSize","maxWidth","Tgdetail","trainingGroups","trainingSessions","useOutletContext","farmVisitsPerGroup","setFarmVisitsPerGroup","useState","participantsPerGroup","setParticipantsPerGroup","params","useParams","id","shouldSkipQuery","getAllFarmVisitsByTG","useQuery","variables","tgId","skip","loading","error","data","selectedTrainingGroup","find","group","tg_id","useEffect","farmVisits","getFarmVisitsByGroup","getParticipantsByGroup","participants","_jsx","LoadingScreen","className","children","Typography","_jsxs","_Fragment","Breadcrumb","name","tg_name","firstItem","linkTo","style","Tgtabs","details","length","filter","session","ts_group"],"sourceRoot":""}