"use strict";(self.webpackChunkmypima_front=self.webpackChunkmypima_front||[]).push([[510],{50284:function(e,n,t){t(72791);var r=t(13239),i=t(80184);n.Z=function(){return(0,i.jsxs)("div",{className:"circular_progress",children:[(0,i.jsxs)("div",{className:"spinner-container",children:[(0,i.jsx)("div",{className:"spinner-glow"}),(0,i.jsx)(r.Z,{className:"spinner",size:80,thickness:4.5,style:{color:"#1b2a4e"}})]}),(0,i.jsx)("h2",{children:"Loading Data..."})]})}},60586:function(e,n,t){t.d(n,{o:function(){return a}});var r,i,s=t(30168),o=t(9383),a=((0,o.Ps)(r||(r=(0,s.Z)(["\n  query GetAllTrainingModules {\n    getAllTrainingModules {\n      message\n      status\n      training_modules {\n        tm_id\n        tm_name\n        tm_title\n        tm_module_number\n        tm_project\n        tm_status\n        tm_is_current\n        tm_date\n      }\n    }\n  }\n"]))),(0,o.Ps)(i||(i=(0,s.Z)(["\n  query GetTrainingModulesByProject($projectId: String!) {\n    getTrainingModulesByProject(project_id: $projectId) {\n      message\n      status\n      training_modules {\n        tm_id\n        tm_name\n        tm_title\n        tm_module_number\n        tm_project\n        tm_status\n        tm_is_current\n        tm_date\n      }\n    }\n  }\n"]))))},71510:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(93433),i=t(29439),s=t(72791),o=t(80184),a=function(e){var n=e.heading,t=e.figures,r=e.icon,i=e.color;return(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"card__container",children:(0,o.jsxs)("div",{className:"card__content",children:[(0,o.jsxs)("div",{className:"card__text",children:[(0,o.jsx)("p",{className:"card__text1",children:n}),(0,o.jsx)("p",{className:"card__text2",children:t})]}),(0,o.jsxs)("div",{className:"card__icon",style:{backgroundColor:i},children:[r," "]})]})})})},l=t(16856),c=t(14651),d=t(39126),u=t(68014),m=t(56355),g=t(11087),h=t(5574),_=t(65661),f=t(39157),j=t(90493),p=t(84852),x=t(20653),v=t(49900),y=t(97123),Z=t(78914),C=t(75546),T=function(e){var n=e.open,t=e.handleClose,r=e.title,i=e.data;return(0,o.jsxs)(h.Z,{open:n,onClose:t,children:[(0,o.jsx)(_.Z,{children:r}),(0,o.jsx)(f.Z,{children:(0,o.jsx)(j.Z,{children:i.map((function(e,n){return(0,o.jsxs)(p.ZP,{button:!0,children:[(0,o.jsx)(x.Z,{children:(0,o.jsx)(C.ZP,{name:e,size:"40",round:!0,color:"#7B9D6F",fgColor:"#fff"})}),(0,o.jsx)(v.Z,{primary:e})]},n)}))})}),(0,o.jsx)(y.Z,{children:(0,o.jsx)(Z.Z,{onClick:t,color:"primary",children:"Close"})})]})},b=t(4567),P=t(61889),F=t(83064),N=t(32543),S=t(60586),M=t(50284),B=function(e){var n=e.trainingGroups,t=e.projectStats,h=e.selectedProject,_=(0,s.useState)(!1),f=(0,i.Z)(_,2),j=f[0],p=f[1],x=(0,s.useState)([]),v=(0,i.Z)(x,2),y=v[0],Z=v[1],C=(0,s.useState)(""),B=(0,i.Z)(C,2),D=B[0],I=B[1],k=(0,s.useState)([]),A=(0,i.Z)(k,2),w=A[0],L=A[1],H=(0,N.a)(S.o,{variables:{projectId:h}}),O=H.data,W=H.loading,G=H.error;(0,s.useEffect)((function(){var e;O&&200===(null===(e=O.getTrainingModulesByProject)||void 0===e?void 0:e.status)&&L(O.getTrainingModulesByProject.training_modules.map((function(e){return{title:e.tm_date||"No date",cardTitle:e.tm_is_current?"".concat(e.tm_title," (Current)"):e.tm_title,cardSubtitle:"Session Number: ".concat(e.tm_module_number),isCurrent:e.tm_is_current}})))}),[O]);var z=(0,s.useMemo)((function(){var e,r;return[{name:"total_training_groups",heading:"Total FFGs",figures:n.length,icon:(0,o.jsx)(l.te,{}),color:"#25245D",path:"/in/traingroup"},{name:"total_training_modules",heading:"Completed Sessions",figures:200===(null===O||void 0===O||null===(e=O.getTrainingModulesByProject)||void 0===e?void 0:e.status)?O.getTrainingModulesByProject.training_modules.length:0,icon:(0,o.jsx)(c.tpf,{}),color:"#25245D"},{name:"total_completed_training_modules",heading:"Completed Topics",figures:200===(null===O||void 0===O||null===(r=O.getTrainingModulesByProject)||void 0===r?void 0:r.status)?O.getTrainingModulesByProject.training_modules.filter((function(e){return!e.tm_is_current})).length:0,icon:(0,o.jsx)(c.tpf,{}),color:"#25245D",path:"/in/trainsession"},{name:"total_participants",heading:"Registered Farmers",figures:n.map((function(e){return e.total_participants})).reduce((function(e,n){return e+n}),0).toLocaleString(),icon:(0,o.jsx)(d.gW$,{}),color:"#087C8F",path:"/in/participants"},{name:"total_fts",heading:"Registered Households",figures:n.map((function(e){return e.total_households})).reduce((function(e,n){return e+n}),0).toLocaleString(),icon:(0,o.jsx)(u.W33,{}),color:"#F46700"},{name:"total_fts",heading:"Trained Farmers",figures:"N/A",icon:(0,o.jsx)(u.W33,{}),color:"#F46700"},{name:"total_bas",heading:"Agronomy Advisors",figures:t.total_bas,icon:(0,o.jsx)(m.LmS,{}),color:"#F46700"},{name:"total_fts",heading:"Farmer Trainers",figures:t.total_fts,icon:(0,o.jsx)(u.W33,{}),color:"#F46700"}]}),[n,O,t]);return W?(0,o.jsx)(M.Z,{}):G?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,o.jsx)(b.Z,{color:"error",children:"Error loading data"})}):(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"module__heading",children:"Your Dashboard"}),(0,o.jsx)(P.ZP,{container:!0,spacing:2,children:z.map((function(e,t){return(0,o.jsx)(P.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,o.jsx)(g.OL,{to:e.path||"#",onClick:function(t){return e.path?null:function(e,t){e.preventDefault();var i={total_bas:{title:"Business Advisors",list:(0,r.Z)(new Set(n.map((function(e){return e.business_advisor}))))},total_fts:{title:"Farmer Trainers",list:(0,r.Z)(new Set(n.map((function(e){return e.farmer_trainer}))))}};i[t]&&(p(!0),I(i[t].title),Z(i[t].list))}(t,e.name)},children:(0,o.jsx)(a,{heading:e.heading,figures:e.figures,icon:e.icon,color:e.color})})},t)}))}),(0,o.jsxs)("div",{style:{marginTop:"20px"},children:[(0,o.jsx)("h4",{children:"Project Modules Timeline"}),w.length>0?(0,o.jsx)("div",{style:{width:"100%",height:"500px"},children:(0,o.jsx)(F.k,{items:w,mode:"HORIZONTAL",allowDynamicUpdate:!0,cardWidth:300,cardHeight:150,contentDetailsHeight:250,activeItemIndex:-1!==w.findIndex((function(e){return e.isCurrent}))?w.findIndex((function(e){return e.isCurrent})):w.length-1,focusActiveItemOnLoad:!0,cardPositionHorizontal:"TOP",theme:{primary:"#087C8F",secondary:"#087C8F",cardBgColor:"#fff",cardForeColor:"#7D7F88",titleColor:"#7D7F88",titleColorActive:"#fff",subtitleColor:"#fff"}})}):(0,o.jsx)(b.Z,{variant:"body1",color:"textSecondary",align:"center",children:"No modules found"})]}),(0,o.jsx)(T,{open:j&&n.length>0,handleClose:function(){return p(!1)},data:y,title:D})]})}}}]);
//# sourceMappingURL=510.95d5bae0.chunk.js.map