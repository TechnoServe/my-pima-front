{"version":3,"file":"static/js/482.0209957b.chunk.js","mappings":"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","sources":["features/fvapprove/fvApprove.js","graphql/queries/farmVisitsRequests.js","../node_modules/file-saver/src/FileSaver.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useQuery, useMutation, useLazyQuery } from \"@apollo/client\";\r\nimport {\r\n  GET_SAMPLED_VISITS_STATS,\r\n  GET_BEST_PRACTICE_STATS,\r\n  GET_PAGINATED_REVIEWS,\r\n  SUBMIT_BATCH,\r\n  GENERATE_FARM_VISIT_REPORT,\r\n} from \"../../graphql/queries/farmVisitsRequests\";\r\nimport \"./fvapprove.css\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { saveAs } from \"file-saver\";\r\n\r\nconst pageSize = 5;\r\n\r\nconst practices = [\r\n  { name: \"Compost\" },\r\n  { name: \"Main Stems\" },\r\n  { name: \"Shade Management\" },\r\n  { name: \"Weeding\" },\r\n  { name: \"Record Book\" },\r\n  { name: \"Stumping\" },\r\n];\r\n\r\nconst placeholderImageUrl = \"https://via.placeholder.com/150\"; // Placeholder image URL\r\n\r\nconst LoadingSpinner = () => (\r\n  <div className=\"loading-container\">\r\n    <div className=\"spinner\"></div>\r\n    <p>Loading, please wait...</p>\r\n  </div>\r\n);\r\n\r\nconst ErrorMessage = ({ message }) => (\r\n  <div className=\"error-container\">\r\n    <div className=\"error-message\">\r\n      <h3>Something went wrong</h3>\r\n      <p>{message}</p>\r\n      <button onClick={() => window.location.reload()}>Try Again</button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst FarmVisitApp = ({ selectedProject, userId }) => {\r\n  const [selectedPractice, setSelectedPractice] = useState(null);\r\n  const [page, setPage] = useState(0);\r\n  const [visits, setVisits] = useState([]);\r\n  const [filteredVisits, setFilteredVisits] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n  const [comments, setComments] = useState({});\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [loadingImages, setLoadingImages] = useState({});\r\n  const [submitting, setSubmitting] = useState(false); // New state for submission loading\r\n  const [downloadingReport, setDownloadingReport] = useState(false); // State for report download\r\n\r\n  const {\r\n    data: statsData,\r\n    loading: statsLoading,\r\n    error: statsError,\r\n  } = useQuery(GET_SAMPLED_VISITS_STATS, {\r\n    variables: { projectId: selectedProject },\r\n  });\r\n\r\n  const {\r\n    data: visitsData,\r\n    loading: visitsLoading,\r\n    error: visitsError,\r\n    refetch: refetchVisits,\r\n  } = useQuery(GET_PAGINATED_REVIEWS, {\r\n    variables: {\r\n      projectId: selectedProject,\r\n      practiceName: selectedPractice ? selectedPractice.name : \"\",\r\n      page: 0,\r\n      pageSize: 1000,\r\n    },\r\n    skip: !selectedPractice, // Skip the query until a practice is selected\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const [submitBatchMutation] = useMutation(SUBMIT_BATCH);\r\n  const [generateFarmVisitReport] = useLazyQuery(GENERATE_FARM_VISIT_REPORT, {\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (visitsData && visitsData.getPaginatedReviews) {\r\n      setVisits(visitsData.getPaginatedReviews);\r\n    }\r\n  }, [visitsData]);\r\n\r\n  useEffect(() => {\r\n    if (selectedPractice) {\r\n      const filtered = visits.filter((visit) =>\r\n        visit.BestPractices.some(\r\n          (bp) => bp.practice_name === selectedPractice.name\r\n        )\r\n      );\r\n      setFilteredVisits(filtered);\r\n    }\r\n  }, [selectedPractice, visits]);\r\n\r\n  const handleSelectPractice = (practice) => {\r\n    setSelectedPractice(practice);\r\n    setPage(0);\r\n    setAnswers({});\r\n    setComments({});\r\n    refetchVisits({ practiceName: practice.name });\r\n  };\r\n\r\n  const handleAnswerChange = (visitId, value) => {\r\n    setAnswers((prev) => ({ ...prev, [visitId]: value }));\r\n  };\r\n\r\n  const handleCommentsChange = (visitId, value) => {\r\n    setComments((prev) => ({ ...prev, [visitId]: value }));\r\n  };\r\n\r\n  const handleSubmitBatch = () => {\r\n    // Get the current page's filtered visits\r\n    const currentPageVisits = filteredVisits.slice(\r\n      page * pageSize,\r\n      (page + 1) * pageSize\r\n    );\r\n\r\n    // Check if all the answers have been filled out\r\n    const allFilled = currentPageVisits.every(\r\n      (visit) => answers[visit.visit_id]\r\n    );\r\n\r\n    if (!allFilled) {\r\n      toast.error(\r\n        \"Please fill out 'Correct Answer?' for all records before submitting.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Prepare the batch input for the API call\r\n    const batchInput = currentPageVisits.map((visit) => {\r\n      const bestPractice = visit.BestPractices.find(\r\n        (bp) => bp.practice_name === selectedPractice.name\r\n      );\r\n\r\n      return {\r\n        practice_id: bestPractice.practice_id,\r\n        correct_answer: answers[visit.visit_id].toLowerCase(),\r\n        comment: comments[visit.visit_id] || \"\",\r\n        user_id: userId,\r\n      };\r\n    });\r\n\r\n    // Show loading spinner and disable submit button\r\n    setSubmitting(true);\r\n\r\n    // Call the API to submit the batch\r\n    submitBatchMutation({\r\n      variables: {\r\n        input: batchInput,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        setSubmitting(false);\r\n\r\n        if (response.data.submitBatch.success) {\r\n          toast.success(\"Batch submitted successfully!\");\r\n\r\n          // Reset answers and comments\r\n          setAnswers({});\r\n          setComments({});\r\n\r\n          // Reset page to 0 and refetch visits data\r\n          setPage(0);\r\n          refetchVisits({ fetchPolicy: \"network-only\" });\r\n        } else {\r\n          toast.error(\r\n            \"Failed to submit batch: \" + response.data.submitBatch.message\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setSubmitting(false);\r\n        console.error(\"Error submitting batch:\", error);\r\n        toast.error(\"An error occurred while submitting the batch.\");\r\n      });\r\n  };\r\n\r\n  const goBackToOverview = () => {\r\n    setSelectedPractice(null);\r\n    setPage(0);\r\n    setAnswers({});\r\n    setComments({});\r\n  };\r\n\r\n  const handleImageClick = (formId, imageId) => {\r\n    setSelectedImage(\r\n      `${process.env.REACT_APP_API_URL}/image/${formId}/${imageId}`\r\n    );\r\n  };\r\n\r\n  const closeImageModal = () => {\r\n    setSelectedImage(null);\r\n  };\r\n\r\n  const handleImageLoad = (imageId) => {\r\n    setLoadingImages((prev) => ({ ...prev, [imageId]: false }));\r\n  };\r\n\r\n  const handleImageError = (imageId) => {\r\n    setLoadingImages((prev) => ({ ...prev, [imageId]: false }));\r\n  };\r\n\r\n  const handleDownloadReport = () => {\r\n    if (!selectedProject) {\r\n      toast.error(\"No project selected.\");\r\n      return;\r\n    }\r\n\r\n    setDownloadingReport(true);\r\n    generateFarmVisitReport({ variables: { projectId: selectedProject } })\r\n      .then((response) => {\r\n        const { generateFarmVisitReport } = response.data;\r\n        if (generateFarmVisitReport.status === 200 && generateFarmVisitReport.file) {\r\n          const base64Data = generateFarmVisitReport.file.split(',')[1]; // Removing the data URI prefix\r\n          const blob = base64ToBlob(\r\n            base64Data,\r\n            \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\r\n          );\r\n          saveAs(blob, \"farm_visit_statistics.xlsx\");\r\n          toast.success(\"Download started.\");\r\n        } else {\r\n          toast.error(generateFarmVisitReport.message || \"Failed to generate report.\");\r\n        }\r\n        setDownloadingReport(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error generating report:\", error);\r\n        toast.error(\"An error occurred while generating the report.\");\r\n        setDownloadingReport(false);\r\n      });\r\n  };\r\n\r\n  const base64ToBlob = (base64Data, contentType) => {\r\n    const byteCharacters = atob(base64Data);\r\n    const byteArrays = [];\r\n    for (let offset = 0; offset < byteCharacters.length; offset += 512) {\r\n      const slice = byteCharacters.slice(offset, offset + 512);\r\n      const byteNumbers = new Array(slice.length);\r\n      for (let i = 0; i < slice.length; i++) {\r\n        byteNumbers[i] = slice.charCodeAt(i);\r\n      }\r\n      const byteArray = new Uint8Array(byteNumbers);\r\n      byteArrays.push(byteArray);\r\n    }\r\n    return new Blob(byteArrays, { type: contentType });\r\n  };\r\n\r\n  if (statsLoading) return <LoadingSpinner />;\r\n  if (statsError) return <ErrorMessage message={statsError.message} />;\r\n\r\n  const { totalSampledVisits, totalReviewed, remainingVisits } =\r\n    statsData.getSampledVisitsStats;\r\n\r\n  return (\r\n    <div className=\"farm-visit-app\">\r\n      {!selectedPractice ? (\r\n        <>\r\n          <div className=\"dashboard-header\">\r\n            <div className=\"dashboard-info\">\r\n              <p>\r\n                <strong>Total Sampled Visits:</strong> {totalSampledVisits}\r\n              </p>\r\n              <p>\r\n                <strong>Total Reviewed:</strong> {totalReviewed}\r\n              </p>\r\n              <p>\r\n                <strong>Remaining Visits:</strong> {remainingVisits}\r\n              </p>\r\n            </div>\r\n            <button\r\n              className=\"download-button\"\r\n              onClick={handleDownloadReport}\r\n              disabled={downloadingReport}\r\n            >\r\n              {downloadingReport ? \"Downloading...\" : \"Download Report\"}\r\n            </button>\r\n          </div>\r\n          <h1 className=\"dashboard-title\">Choose Adoption Method to Review</h1>\r\n          <div className=\"practices-container\">\r\n            {practices.map((practice) => (\r\n              <PracticeCard\r\n                key={practice.name}\r\n                practice={practice}\r\n                projectId={selectedProject}\r\n                onSelect={handleSelectPractice}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"indicator\">\r\n            <span onClick={goBackToOverview} className=\"indicator-link\">\r\n              Back to Practice Overview\r\n            </span>\r\n          </div>\r\n          <h2 className=\"sub-header\">Reviewing {selectedPractice.name}</h2>\r\n          {visitsLoading && <LoadingSpinner />}\r\n          {visitsError && <ErrorMessage message={visitsError.message} />}\r\n          {!visitsLoading && !visitsError && filteredVisits.length > 0 && (\r\n            <>\r\n              <div className=\"visit-list\">\r\n                {filteredVisits\r\n                  .slice(page * pageSize, (page + 1) * pageSize)\r\n                  .map((visit) => {\r\n                    const bestPractice = visit.BestPractices.find(\r\n                      (bp) => bp.practice_name === selectedPractice.name\r\n                    );\r\n\r\n                    const [formId, imageId] =\r\n                      bestPractice?.image_url?.split(\"/\").slice(-2) || [];\r\n\r\n                    return (\r\n                      <div key={visit.visit_id} className=\"visit-item\">\r\n                        <div className=\"visit-details\">\r\n                          <p>\r\n                            <strong>Farmer PIMA ID:</strong>{\" \"}\r\n                            {visit.farmer_pima_id}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Farmer TNS ID:</strong>{\" \"}\r\n                            {visit.farmer_tns_id}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Date Visited:</strong> {visit.date_visited}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Farmer Name:</strong> {visit.farmer_name}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Farmer Trainer:</strong>{\" \"}\r\n                            {visit.farmer_trainer}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Question:</strong>{\" \"}\r\n                            {bestPractice?.question || \"N/A\"}\r\n                          </p>\r\n                          <p>\r\n                            <strong>Observation:</strong>{\" \"}\r\n                            {bestPractice?.answer || \"N/A\"}\r\n                          </p>\r\n                        </div>\r\n\r\n                        <div className=\"visit-image\">\r\n                          {loadingImages[imageId] && <LoadingSpinner />}\r\n                          <img\r\n                            src={\r\n                              bestPractice?.image_url\r\n                                ? `${process.env.REACT_APP_API_URL}/image/${formId}/${imageId}`\r\n                                : placeholderImageUrl\r\n                            }\r\n                            alt=\"Farm Visit\"\r\n                            style={{\r\n                              display: loadingImages[imageId]\r\n                                ? \"none\"\r\n                                : \"block\",\r\n                            }}\r\n                            onLoad={() => handleImageLoad(imageId)}\r\n                            onError={() => handleImageError(imageId)}\r\n                            onClick={() => handleImageClick(formId, imageId)}\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"answer-field\">\r\n                          <label>Correct Answer?</label>\r\n                          <select\r\n                            value={answers[visit.visit_id] || \"\"}\r\n                            onChange={(e) =>\r\n                              handleAnswerChange(visit.visit_id, e.target.value)\r\n                            }\r\n                          >\r\n                            <option value=\"\">-- Select --</option>\r\n                            <option value=\"Yes\">Yes</option>\r\n                            <option value=\"No\">No</option>\r\n                            <option value=\"Unclear\">Unclear</option>\r\n                          </select>\r\n                        </div>\r\n\r\n                        <div className=\"comment-field\">\r\n                          <label>Comments:</label>\r\n                          <textarea\r\n                            value={comments[visit.visit_id] || \"\"}\r\n                            onChange={(e) =>\r\n                              handleCommentsChange(\r\n                                visit.visit_id,\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                            placeholder=\"Optional comments...\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n              <div className=\"pagination-controls\">\r\n                <button disabled={page === 0} onClick={() => setPage(page - 1)}>\r\n                  Previous Page\r\n                </button>\r\n                <button\r\n                  disabled={\r\n                    page >= Math.floor(filteredVisits.length / pageSize)\r\n                  }\r\n                  onClick={() => setPage(page + 1)}\r\n                >\r\n                  Next Page\r\n                </button>\r\n              </div>\r\n              <button\r\n                className=\"submit-button\"\r\n                onClick={handleSubmitBatch}\r\n                disabled={submitting} // Disable the button while submitting\r\n              >\r\n                {submitting ? \"Submitting...\" : \"Submit Batch\"}\r\n              </button>\r\n            </>\r\n          )}\r\n          {selectedImage && (\r\n            <div className=\"image-modal\" onClick={closeImageModal}>\r\n              <img src={selectedImage} alt=\"Fullscreen Farm Visit\" />\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PracticeCard = ({ practice, onSelect, projectId }) => {\r\n  const { data, loading, error } = useQuery(GET_BEST_PRACTICE_STATS, {\r\n    variables: { projectId, practiceName: practice.name },\r\n  });\r\n\r\n  return (\r\n    <div className=\"practice-card\" onClick={() => onSelect(practice)}>\r\n      <h3>{practice.name}</h3>\r\n      {loading && <LoadingSpinner />}\r\n      {error && <ErrorMessage message={error.message} />}\r\n      {!loading && !error && (\r\n        <div className=\"progress\">\r\n          <p>\r\n            <strong>Reviewed:</strong>{\" \"}\r\n            {data?.getBestPracticeReviewStats?.reviewedVisits || 0}\r\n          </p>\r\n          <p>\r\n            <strong>Remaining:</strong>{\" \"}\r\n            {data?.getBestPracticeReviewStats?.remainingVisits || 0}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FarmVisitApp;\r\n","import { gql } from \"@apollo/client\";\r\n\r\nconst GET_FARM_VISITS_PER_PROJECT = gql`\r\n  query GetFarmVisitsByProject($projectId: String!) {\r\n    getFarmVisitsByProject(project_id: $projectId) {\r\n      message\r\n      status\r\n      farmVisits {\r\n        fv_id\r\n        training_group\r\n        farmer_tns_id\r\n        household_tns_id\r\n        farm_visited\r\n        farmer_trainer\r\n        date_visited\r\n        pima_household_id\r\n        pima_farmer_id\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FARM_VISITS_PER_TG = gql`\r\n  query GetFarmVisitsByGroup($tgId: String!) {\r\n    getFarmVisitsByGroup(tg_id: $tgId) {\r\n      message\r\n      status\r\n      farmVisits {\r\n        fv_id\r\n        fv_name\r\n        training_group\r\n        training_session\r\n        tns_id\r\n        farm_visited\r\n        household_id\r\n        farmer_trainer\r\n        has_training\r\n        date_visited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FARM_VISITS_PER_TS = gql`\r\n  query GetFarmVisitsBySession($tsId: String!) {\r\n    getFarmVisitsBySession(ts_id: $tsId) {\r\n      message\r\n      status\r\n      farmVisits {\r\n        fv_id\r\n        fv_name\r\n        training_group\r\n        training_session\r\n        tns_id\r\n        farm_visited\r\n        household_id\r\n        farmer_trainer\r\n        has_training\r\n        date_visited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FARM_VISITS_PER_PART = gql`\r\n  query GetFarmVisitsByParticipant($partId: String!) {\r\n    getFarmVisitsByParticipant(part_id: $partId) {\r\n      message\r\n      status\r\n      farmVisits {\r\n        fv_id\r\n        fv_name\r\n        training_group\r\n        training_session\r\n        farmer_tns_id\r\n        farm_visited\r\n        household_id\r\n        farmer_trainer\r\n        has_training\r\n        date_visited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FARM_VISIT_QAs = gql`\r\n  query GetFVQAsByFarmVisits($fvId: String!) {\r\n    getFVQAsByFarmVisits(fv_id: $fvId) {\r\n      message\r\n      status\r\n      fvQAs {\r\n        bp_id\r\n        fv_id\r\n        qas {\r\n          practice_name_id\r\n          practice_name\r\n          questions\r\n          answers\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst UPDATE_QA_IMAGE = gql`\r\n  mutation UpdateFVQAImageStatus(\r\n    $bpId: String!\r\n    $fieldName: FieldNames!\r\n    $imageStatus: Status!\r\n  ) {\r\n    updateFVQAImageStatus(\r\n      bp_id: $bpId\r\n      field_name: $fieldName\r\n      image_status: $imageStatus\r\n    ) {\r\n      message\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FVQAS_BY_PROJECT_FOR_REVIEW = gql`\r\n  query getFVQAsByProjectForReview(\r\n    $projectId: String!\r\n    $limit: Int!\r\n    $offset: Int!\r\n  ) {\r\n    getFVQAsByProjectForReview(\r\n      project_id: $projectId\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      message\r\n      status\r\n      farmVisits {\r\n        fv_id\r\n        training_group\r\n        training_session\r\n        tns_id\r\n        farm_visited\r\n        household_id\r\n        farmer_trainer\r\n        has_training\r\n        date_visited\r\n        status\r\n        qas {\r\n          practice_name_id\r\n          practice_name\r\n          questions\r\n          answers\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_FVQAS_BY_PROJECT_IN_EXCEL = gql`\r\n  query getFVQAsByProjectInExcel($projectId: String!, $practiceName: String!) {\r\n    getFVQAsByProjectInExcel(\r\n      project_id: $projectId\r\n      practice_name: $practiceName\r\n    ) {\r\n      message\r\n      status\r\n      file\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_OVERALL_REPORT = gql`\r\n  query getFVQAsByProjectInExcel($projectId: String!, $practiceName: String!) {\r\n    getFVQAsByProjectInExcel(\r\n      project_id: $projectId\r\n      practice_name: $practiceName\r\n    ) {\r\n      message\r\n      status\r\n      file\r\n    }\r\n  }\r\n`;\r\n\r\nconst UPLOAD_APPROVED_FV = gql`\r\n  mutation UploadParticipants($partsFile: Upload!) {\r\n    uploadParticipants(parts_file: $partsFile) {\r\n      message\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_SAMPLED_VISITS_STATS = gql`\r\n  query GetSampledVisitsStats($projectId: String!) {\r\n    getSampledVisitsStats(projectId: $projectId) {\r\n      totalSampledVisits\r\n      totalReviewed\r\n      remainingVisits\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_BEST_PRACTICE_STATS = gql`\r\n  query GetBestPracticeStats($projectId: String!, $practiceName: String!) {\r\n    getBestPracticeReviewStats(\r\n      projectId: $projectId\r\n      practiceName: $practiceName\r\n    ) {\r\n      reviewedVisits\r\n      remainingVisits\r\n      totalVisits\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_PAGINATED_REVIEWS = gql`\r\n  query GetPaginatedReviews(\r\n    $projectId: String!\r\n    $practiceName: String!\r\n    $page: Int!\r\n    $pageSize: Int!\r\n  ) {\r\n    getPaginatedReviews(\r\n      projectId: $projectId\r\n      practiceName: $practiceName\r\n      page: $page\r\n      pageSize: $pageSize\r\n    ) {\r\n      visit_id\r\n      sf_visit_id\r\n      farmer_name\r\n      farmer_pima_id\r\n      farmer_tns_id\r\n      date_visited\r\n      farmer_trainer\r\n      BestPractices {\r\n        practice_id\r\n        practice_name\r\n        image_url\r\n        sf_practice_id\r\n        question\r\n        answer\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst GENERATE_FARM_VISIT_REPORT = gql`\r\n  query GenerateFarmVisitReport($projectId: String!) {\r\n    generateFarmVisitReport(projectId: $projectId) {\r\n      message\r\n      status\r\n      file\r\n    }\r\n  }\r\n`;\r\n\r\nconst SUBMIT_BATCH_APPROVED_VISITS = gql`\r\n  mutation SubmitBatch($input: [BatchInput!]!) {\r\n    submitBatch(input: $input) {\r\n      success\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nconst SUBMIT_BATCH = gql`\r\n  mutation SubmitBatch($input: [BatchInput!]!) {\r\n    submitBatch(input: $input) {\r\n      success\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport {\r\n  GET_FARM_VISITS_PER_PROJECT,\r\n  GET_FARM_VISITS_PER_TG,\r\n  GET_FARM_VISITS_PER_TS,\r\n  GET_FARM_VISITS_PER_PART,\r\n  GET_FARM_VISIT_QAs,\r\n  GET_FVQAS_BY_PROJECT_FOR_REVIEW,\r\n  GET_FVQAS_BY_PROJECT_IN_EXCEL,\r\n  GET_OVERALL_REPORT,\r\n  GET_PAGINATED_REVIEWS,\r\n  GET_BEST_PRACTICE_STATS,\r\n  GET_SAMPLED_VISITS_STATS,\r\n  GENERATE_FARM_VISIT_REPORT,\r\n  SUBMIT_BATCH_APPROVED_VISITS,\r\n  SUBMIT_BATCH,\r\n  UPLOAD_APPROVED_FV,\r\n  UPDATE_QA_IMAGE,\r\n};\r\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n"],"names":["practices","name","LoadingSpinner","_jsxs","className","children","_jsx","ErrorMessage","_ref","message","onClick","window","location","reload","PracticeCard","_ref5","_data$getBestPractice","_data$getBestPractice2","practice","onSelect","projectId","_useQuery3","useQuery","GET_BEST_PRACTICE_STATS","variables","practiceName","data","loading","error","getBestPracticeReviewStats","reviewedVisits","remainingVisits","_ref2","selectedProject","userId","_useState","useState","_useState2","_slicedToArray","selectedPractice","setSelectedPractice","_useState3","_useState4","page","setPage","_useState5","_useState6","visits","setVisits","_useState7","_useState8","filteredVisits","setFilteredVisits","_useState9","_useState10","answers","setAnswers","_useState11","_useState12","comments","setComments","_useState13","_useState14","selectedImage","setSelectedImage","_useState15","_useState16","loadingImages","setLoadingImages","_useState17","_useState18","submitting","setSubmitting","_useState19","_useState20","downloadingReport","setDownloadingReport","_useQuery","GET_SAMPLED_VISITS_STATS","statsData","statsLoading","statsError","_useQuery2","GET_PAGINATED_REVIEWS","pageSize","skip","fetchPolicy","visitsData","visitsLoading","visitsError","refetchVisits","refetch","_useMutation","useMutation","SUBMIT_BATCH","submitBatchMutation","_useLazyQuery","useLazyQuery","GENERATE_FARM_VISIT_REPORT","generateFarmVisitReport","useEffect","getPaginatedReviews","filtered","filter","visit","BestPractices","some","bp","practice_name","handleSelectPractice","base64ToBlob","base64Data","contentType","byteCharacters","atob","byteArrays","offset","length","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","type","_statsData$getSampled","getSampledVisitsStats","totalSampledVisits","totalReviewed","_Fragment","map","_bestPractice$image_u","bestPractice","find","_ref3","image_url","split","_ref4","formId","imageId","farmer_pima_id","farmer_tns_id","date_visited","farmer_name","farmer_trainer","question","answer","src","concat","process","alt","style","display","onLoad","prev","_objectSpread","_defineProperty","handleImageLoad","onError","handleImageError","handleImageClick","value","visit_id","onChange","e","visitId","target","placeholder","disabled","Math","floor","currentPageVisits","every","batchInput","practice_id","correct_answer","toLowerCase","comment","user_id","input","then","response","submitBatch","success","toast","catch","console","status","file","blob","saveAs","GET_FARM_VISITS_PER_PROJECT","gql","_templateObject","_taggedTemplateLiteral","GET_FARM_VISITS_PER_TG","_templateObject2","GET_FARM_VISITS_PER_PART","_templateObject3","_templateObject4","GET_FARM_VISIT_QAs","_templateObject5","UPDATE_QA_IMAGE","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","b","a","autoBom","warn","test","c","d","XMLHttpRequest","open","responseType","onload","g","onerror","send","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","f","self","global","navigator","userAgent","HTMLAnchorElement","prototype","h","URL","webkitURL","j","createElement","download","rel","href","origin","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports"],"sourceRoot":""}